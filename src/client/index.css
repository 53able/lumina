@import "tailwindcss";

@plugin "tailwindcss-animate";

@custom-variant dark (&:is(.dark *));

@theme {
  /* Font */
  --font-sans: "Instrument Sans", system-ui, sans-serif;
  --font-mono: "JetBrains Mono", ui-monospace, monospace;

  /* Radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;

  /* 微調整可能なパラメータ */
  /* 1px単位で調整可能 */
  --spacing-unit: 1px;
  --hover-scale: 1.05; /* hover時のスケール */
  --active-scale: 0.95; /* active時のスケール */
  --card-hover-scale: 1.02; /* カードhover時のスケール */
  --input-focus-scale: 1.02; /* 入力フォーカス時のスケール */
  
  /* 1ms単位で調整可能 */
  --transition-fast: 150ms;
  --transition-base: 200ms;
  --transition-slow: 300ms;

  /* Colors - Lumina Theme (Deep Space Aesthetic) */
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  /* 明度による階層化 */
  --color-primary-light: hsl(var(--primary-light));
  --color-primary-dark: hsl(var(--primary-dark));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  /* Chart colors */
  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));

  /* Sidebar */
  --color-sidebar: hsl(var(--sidebar-background));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));
}

@layer base {
  :root {
    /* Deep Space Theme - Dark by default */
    --background: 222 47% 6%;
    --foreground: 210 40% 98%;

    --card: 222 47% 8%;
    --card-foreground: 210 40% 98%;

    --popover: 222 47% 8%;
    --popover-foreground: 210 40% 98%;

    /* Aurora Cyan Primary - メインカラー統一 */
    --primary: 185 75% 55%;
    --primary-foreground: 222 47% 6%;
    /* 明度による階層化 */
    --primary-light: 185 75% 70%; /* 重要度の高い情報用 */
    --primary-dark: 185 75% 40%; /* 重要度の低い情報用 */

    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217 33% 17%;
    --muted-foreground: 215 20% 65%;

    /* Accentはメインカラーの明度バリエーションとして統一 */
    --accent: 185 75% 65%; /* primaryより少し明るく */
    --accent-foreground: 222 47% 6%;

    /* destructiveをメインカラーの暗いバリエーションに統一 */
    --destructive: 185 75% 40%; /* primary-darkと同じ */
    --destructive-foreground: 210 40% 98%;

    --border: 217 33% 17%;
    --input: 217 33% 20%;
    --ring: 185 75% 55%;

    /* Chart colors - メインカラーの明度バリエーションで統一 */
    --chart-1: 185 75% 55%; /* primary */
    --chart-2: 185 75% 70%; /* primary-light */
    --chart-3: 185 75% 40%; /* primary-dark */
    --chart-4: 185 75% 50%; /* 中間 */
    --chart-5: 185 75% 35%; /* より暗く */

    /* Sidebar */
    --sidebar-background: 222 47% 4%;
    --sidebar-foreground: 210 40% 98%;
    --sidebar-primary: 185 75% 55%;
    --sidebar-primary-foreground: 222 47% 6%;
    --sidebar-accent: 217 33% 17%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 217 33% 17%;
    --sidebar-ring: 185 75% 55%;
  }

  .light {
    --background: 0 0% 100%;
    --foreground: 222 47% 11%;

    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    /* Aurora Cyan Primary - メインカラー統一 */
    --primary: 185 75% 40%;
    --primary-foreground: 0 0% 100%;
    /* 明度による階層化 */
    --primary-light: 185 75% 55%; /* 重要度の高い情報用 */
    --primary-dark: 185 75% 30%; /* 重要度の低い情報用 */

    --secondary: 220 14% 96%;
    --secondary-foreground: 222 47% 11%;

    --muted: 220 14% 96%;
    --muted-foreground: 220 9% 46%;

    /* Accentはメインカラーの明度バリエーションとして統一 */
    --accent: 185 75% 50%; /* primaryより少し明るく */
    --accent-foreground: 0 0% 100%;

    /* destructiveをメインカラーの暗いバリエーションに統一 */
    --destructive: 185 75% 30%; /* primary-darkと同じ */
    --destructive-foreground: 0 0% 100%;

    --border: 220 13% 91%;
    --input: 220 13% 91%;
    --ring: 185 75% 40%;

    /* Chart colors - メインカラーの明度バリエーションで統一 */
    --chart-1: 185 75% 40%; /* primary */
    --chart-2: 185 75% 55%; /* primary-light */
    --chart-3: 185 75% 30%; /* primary-dark */
    --chart-4: 185 75% 35%; /* 中間 */
    --chart-5: 185 75% 25%; /* より暗く */

    --sidebar-background: 220 14% 98%;
    --sidebar-foreground: 222 47% 11%;
    --sidebar-primary: 185 75% 40%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 220 14% 96%;
    --sidebar-accent-foreground: 222 47% 11%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 185 75% 40%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
  }

  /* タイポグラフィ - 極端な文字詰めと異種フォントの混合 */
  h1, h2, h3, h4, h5, h6 {
    letter-spacing: -0.08em; /* より極端な文字詰め */
    font-weight: 700;
    line-height: 1.1; /* 行間を詰める */
  }

  /* 本文の文字詰め */
  p, span, div {
    letter-spacing: -0.05em; /* より大胆な文字詰め */
    line-height: 1.2;
  }

  /* コード・数値は等幅フォントで区別 */
  code, pre, .font-mono {
    letter-spacing: 0;
    font-family: var(--font-mono);
    font-weight: 600; /* より太く */
  }
  
  /* 斜めのテキスト用クラス */
  .text-rotate-slight {
    transform: rotate(-1deg);
    display: inline-block;
  }
  
  .text-rotate-bold {
    transform: rotate(-2deg);
    display: inline-block;
  }

  /* 異種フォント混合クラス */
  .font-mix-serif {
    font-family: "Times New Roman", "YuMincho", "Hiragino Mincho ProN", serif;
  }

  .font-mix-sans {
    font-family: var(--font-sans);
  }

  .font-condensed {
    font-stretch: condensed;
    letter-spacing: -0.06em;
  }

  /* より大胆な文字詰め */
  .text-tight-bold {
    letter-spacing: -0.08em;
    line-height: 1.1;
  }

  /* 長体（縦に縮める） */
  .text-condensed-vertical {
    transform: scaleY(0.9);
    display: inline-block;
  }

  /* 文字の密度を高める */
  .text-dense {
    letter-spacing: -0.1em;
    line-height: 1;
    font-weight: 800;
  }

  /* カードホバー時のテキスト強調 - 可読性を最優先 */
  .card-3d:hover .card-title-hover {
    /* テキストの色は明示的に設定し、コントラストを維持 */
    color: hsl(var(--foreground)) !important;
    text-shadow: 0 0 8px hsl(var(--primary) / 0.2);
    transform: scale(1.01);
    transition: color 0.2s ease-out, transform 0.2s ease-out, text-shadow 0.2s ease-out;
  }

  .card-3d:hover .card-text-hover {
    /* 不透明度を維持または向上させて可読性を確保 */
    opacity: 1 !important;
    color: hsl(var(--foreground)) !important;
    transition: opacity 0.2s ease-out, color 0.2s ease-out;
  }

  /* whyReadテキストもホバー時に可読性を確保 */
  .card-3d:hover .card-text-hover[style*="primary-light"] {
    color: hsl(var(--primary-light)) !important;
    opacity: 1 !important;
    text-shadow: 0 0 4px hsl(var(--primary) / 0.3);
  }

  /* カードホバー時のアイコン群アニメーション */
  .card-3d:hover .card-actions-hover {
    transform: translateY(-2px);
    transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .card-3d:hover .card-actions-hover > * {
    animation: iconBounce 0.6s ease-out;
    animation-fill-mode: both;
  }

  .card-3d:hover .card-actions-hover > *:nth-child(1) {
    animation-delay: 0.05s;
  }

  .card-3d:hover .card-actions-hover > *:nth-child(2) {
    animation-delay: 0.1s;
  }

  .card-3d:hover .card-actions-hover > *:nth-child(3) {
    animation-delay: 0.15s;
  }
}

@keyframes iconBounce {
  0% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-4px) scale(1.1);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}

/* Custom animations - 微調整可能なパラメータ */
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px); /* --spacing-unit * 10 で調整可能 */
  }
}

@keyframes glow {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6; /* 0.01単位で調整可能 */
  }
}

/* 大胆なモーションアニメーション */
@keyframes cardEnter {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.95) rotate(-2deg);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1) rotate(0deg);
  }
}

@keyframes cardStagger {
  0% {
    opacity: 0;
    transform: translateY(30px) scale(0.9) rotate(-3deg);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1) rotate(0deg);
  }
}

@keyframes ripple {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

@keyframes pulseGlow {
  0%, 100% {
    box-shadow: 0 0 20px hsl(var(--primary) / 0.3);
  }
  50% {
    box-shadow: 0 0 40px hsl(var(--primary) / 0.6);
  }
}

@keyframes particleFloat {
  0% {
    transform: translateY(100vh) translateX(0) rotate(0deg);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    transform: translateY(-100vh) translateX(100px) rotate(360deg);
    opacity: 0;
  }
}

@keyframes loadingBold {
  0%, 100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
  25% {
    transform: scale(1.2) rotate(90deg);
    opacity: 0.8;
  }
  50% {
    transform: scale(0.8) rotate(180deg);
    opacity: 0.6;
  }
  75% {
    transform: scale(1.1) rotate(270deg);
    opacity: 0.8;
  }
}

/* ボタンクリック時の大胆なアニメーション */
@keyframes buttonPress {
  0% {
    transform: scale(1) rotate(0deg);
  }
  50% {
    transform: scale(0.9) rotate(-5deg);
  }
  100% {
    transform: scale(1.05) rotate(2deg);
  }
}


/* 入力欄フォーカス時の大胆なエフェクト */
@keyframes inputFocus {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 0 hsl(var(--primary) / 0);
  }
  50% {
    transform: scale(1.03);
    box-shadow: 0 0 20px 5px hsl(var(--primary) / 0.4);
  }
  100% {
    transform: scale(1.02);
    box-shadow: 0 0 15px 3px hsl(var(--primary) / 0.3);
  }
}

/* ページ遷移時の動的演出 */
@keyframes pageEnter {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.98);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* バッジ選択時のアニメーション */
@keyframes badgeSelect {
  0% {
    transform: scale(1) rotate(0deg);
  }
  50% {
    transform: scale(1.15) rotate(5deg);
  }
  100% {
    transform: scale(1.1) rotate(-2deg);
  }
}

.animate-float {
  animation: float 3s ease-in-out infinite; /* --transition-slow * 10 で調整可能 */
}

.animate-glow {
  animation: glow 2s ease-in-out infinite; /* --transition-base * 10 で調整可能 */
}

.animate-card-enter {
  animation: cardEnter 0.5s ease-out forwards;
}

.animate-card-stagger {
  animation: cardStagger 0.6s ease-out forwards;
}

.animate-ripple {
  animation: ripple 0.6s ease-out;
}

.animate-pulse-glow {
  animation: pulseGlow 2s ease-in-out infinite;
}

.animate-particle {
  animation: particleFloat 20s linear infinite;
}

.animate-loading-bold {
  animation: loadingBold 1.5s ease-in-out infinite;
}

.animate-button-press {
  animation: buttonPress 0.3s ease-out;
}


.animate-input-focus {
  animation: inputFocus 0.4s ease-out;
}

.animate-page-enter {
  animation: pageEnter 0.5s ease-out forwards;
}

.animate-badge-select {
  animation: badgeSelect 0.3s ease-out;
}

/* Background gradient for hero sections - メインカラー統一 */
.bg-gradient-lumina {
  background: radial-gradient(
    ellipse at top,
    hsl(185 75% 55% / 0.15) 0%,
    transparent 50%
  ),
  radial-gradient(
    ellipse at bottom right,
    hsl(185 75% 40% / 0.1) 0%,
    transparent 50%
  );
}

/* 大胆な背景グラデーションとパターン */
.bg-gradient-bold {
  background: 
    radial-gradient(
      ellipse 800px 600px at 20% 30%,
      hsl(185 75% 55% / 0.25) 0%,
      transparent 50%
    ),
    radial-gradient(
      ellipse 600px 800px at 80% 70%,
      hsl(185 75% 40% / 0.2) 0%,
      transparent 50%
    ),
    radial-gradient(
      ellipse 400px 400px at 50% 50%,
      hsl(185 75% 65% / 0.15) 0%,
      transparent 40%
    ),
    linear-gradient(
      135deg,
      hsl(222 47% 6% / 0.8) 0%,
      hsl(222 47% 8% / 0.9) 100%
    );
  position: relative;
}

.bg-gradient-bold::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: 
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 2px,
      hsl(185 75% 55% / 0.03) 2px,
      hsl(185 75% 55% / 0.03) 4px
    );
  pointer-events: none;
}

/* パーティクル風の背景アニメーション */
.bg-particles {
  position: relative;
  overflow: hidden;
}

.bg-particles::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: 
    radial-gradient(2px 2px at 20% 30%, hsl(var(--primary) / 0.3), transparent),
    radial-gradient(2px 2px at 60% 70%, hsl(var(--primary) / 0.2), transparent),
    radial-gradient(1px 1px at 50% 50%, hsl(var(--primary) / 0.4), transparent),
    radial-gradient(1px 1px at 80% 10%, hsl(var(--primary) / 0.3), transparent),
    radial-gradient(2px 2px at 90% 60%, hsl(var(--primary) / 0.2), transparent),
    radial-gradient(1px 1px at 33% 80%, hsl(var(--primary) / 0.3), transparent);
  background-size: 200% 200%;
  animation: particleFloat 30s linear infinite;
  pointer-events: none;
  z-index: 0;
}

/* 光の効果 */
.glow-effect {
  position: relative;
}

.glow-effect::before {
  content: '';
  position: absolute;
  inset: -4px;
  background: radial-gradient(
    circle at center,
    hsl(var(--primary) / 0.4),
    transparent 70%
  );
  border-radius: inherit;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  z-index: -1;
  filter: blur(12px);
}

.glow-effect:hover::before {
  opacity: 1;
}

/* カードのホバー効果 - 大胆なデザイン */
.card-3d {
  /* 背景色を固定してホバー時も可読性を維持 */
  background-color: hsl(var(--card)) !important;
}

.card-3d:hover {
  /* ホバー時も背景色を維持（テキストの可読性を確保） */
  background-color: hsl(var(--card)) !important;
}

.card-3d-inner {
  transform-origin: center center;
  transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease-out;
  /* 背景色を固定してホバー時も可読性を維持 */
  background-color: hsl(var(--card));
}

.card-3d:hover .card-3d-inner {
  /* 3D回転を削除して文字が確実に読めるように（機能要件優先） */
  transform: translateY(-12px) scale(1.02);
  transform-origin: center center;
  box-shadow: 
    0 25px 50px -12px hsl(var(--primary) / 0.4),
    0 15px 30px -8px hsl(var(--primary) / 0.3),
    0 0 0 2px hsl(var(--primary) / 0.2);
  /* ホバー時も背景色を維持（テキストの可読性を確保） */
  background-color: hsl(var(--card));
}

/* カードホバー時もテキストの可読性を維持 */
.card-3d:hover .card-3d-inner * {
  position: relative;
  z-index: 1;
}

/* テキストの色を明示的に設定（ホバー時も可読性を確保） */
.card-3d .card-3d-inner [data-slot="card-title"],
.card-3d .card-3d-inner [data-slot="card-header"],
.card-3d .card-3d-inner [data-slot="card-content"] {
  color: hsl(var(--card-foreground));
}

.card-3d:hover .card-3d-inner [data-slot="card-title"],
.card-3d:hover .card-3d-inner [data-slot="card-header"],
.card-3d:hover .card-3d-inner [data-slot="card-content"] {
  color: hsl(var(--card-foreground));
}

/* カードのグロー効果 - 外側のみ（テキストの可読性を維持） */
.card-glow {
  position: relative;
}

.card-glow::before {
  content: '';
  position: absolute;
  inset: -12px;
  border-radius: inherit;
  background: radial-gradient(
    ellipse at center,
    hsl(var(--primary) / 0.25) 0%,
    hsl(var(--primary) / 0.1) 30%,
    transparent 60%
  );
  opacity: 0;
  transition: opacity 0.2s ease-out;
  z-index: -2;
  filter: blur(20px);
  pointer-events: none;
}

.card-glow:hover::before {
  opacity: 1;
}

/* カードのアクセントライン */
.card-accent-line {
  position: relative;
}

.card-accent-line::after {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: linear-gradient(
    to bottom,
    hsl(var(--primary-light)),
    hsl(var(--primary)),
    hsl(var(--primary-dark))
  );
  border-radius: 0 4px 4px 0;
  transition: width 0.2s ease-out, box-shadow 0.2s ease-out;
  z-index: 1;
  pointer-events: none;
}

.card-accent-line:hover::after {
  width: 6px;
  box-shadow: 0 0 12px hsl(var(--primary) / 0.8);
}

/* 展開時のカードのグラデーションボーダー */
.card-expanded-border {
  position: relative;
  background: linear-gradient(
    hsl(var(--card)),
    hsl(var(--card))
  ) padding-box,
  linear-gradient(
    135deg,
    hsl(var(--primary-light)),
    hsl(var(--primary)),
    hsl(var(--primary-dark))
  ) border-box;
  border: 3px solid transparent;
}
